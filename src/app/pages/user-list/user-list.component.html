<nz-layout class="app-layout">
  <div class="page__content shadow p-1 position-relative">
    <div class="text-center mt-3">
      <h1 class="sousc">Utilisateurs</h1>
    </div>
  </div>

  <div class="container-xl">
    <div class="table-responsive">
      <div class="table-wrapper" style="overflow-y: auto;">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-8">

              <nz-input-group [nzSuffix]="suffixIconSearch">
                <input nz-input placeholder="Rechercher..." [(ngModel)]="searchValue" (ngModelChange)="onSearch()" />
                <ng-template #suffixIconSearch>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </nz-input-group>
            </div>

            <div class="col-sm-4 text-right">

              <button nz-button nzType="default"  class="blue-button" routerLink="/addUser">
                <i nz-icon nzType="plus"></i> Ajouter un utilisateur
              </button>
            </div>
          </div>
        </div>

        <nz-table #basicTable [nzData]="filteredUtilisateurs" [nzFrontPagination]="false">
          <thead>
            <tr>
              <th>Nom</th>
              <th>PrÃ©nom</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let utilisateur of basicTable.data">
              <td>{{ utilisateur.usr_Nom }}</td>
              <td>{{ utilisateur.usr_Prenom }}</td>
              <td>
                <div class="button-container">

                    <button nz-button nzType="default" class="blue-button" [routerLink]="['/editUser', utilisateur.usr_Id]">
                      <i nz-icon nzType="edit"></i> Modifier
                    </button>
                    <button nz-button nzType="default" class="red-button" (click)="supprimerUtilisateur(utilisateur.usr_Id)">
                      <i nz-icon nzType="delete"></i> Supprimer
                    </button>

                </div>
              </td>
            </tr>
          </tbody>
        </nz-table>

        <nz-pagination [nzPageSize]="5" [nzTotal]="filteredUtilisateurs.length" [(nzPageIndex)]="pageIndex"></nz-pagination>
      </div>
    </div>
  </div>
</nz-layout>
